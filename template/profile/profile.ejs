<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile Page</title>
    <link rel="stylesheet" href="/../profile/css/style.css">
    <link rel="stylesheet" href="/../profile/css/Template_HF.css">
    <link rel="stylesheet" href="/../profile/css/review.css">
    <link rel="stylesheet" href="/../profile/css/profile_gen.css">
</head>

<body>
    <div class="content-wrapper">
        <header>

            <a href="/" style="text-decoration: none; color: inherit;">
                <h2>SDhire</h2>
            </a>

            <div class="profile_container">
                <div class="buttom_header">
                    <button type="button" class="profile_button" onclick="toggleDropdown()">
                        <div class="photo_profile">
                            <% if(userdata.profile_image){ %>
                                <img src="/imageForTest/<%= userdata.profile_image %>"
                                    alt="<%= userdata.profile_image%>">
                                <% } else{%>
                                    <img src="https://ui-avatars.com/api/?name=<%= userdata.username || 'User' %>"
                                        alt="‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå">
                                    <% }%>
                        </div>
                        <span>Profile</span>
                    </button>
                </div>

                <div class="data_box" id="myDropdown">
                    <div class="user_infor">

                        <% if(userdata.profile_image){ %>
                            <img src="/imageForTest/<%= userdata.profile_image %>" alt="<%= userdata.profile_image%>">
                            <% } else{%>
                                <img src="https://ui-avatars.com/api/?name=<%= userdata.username || 'User' %>"
                                    alt="‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå">
                                <% }%>
                                    <div class="user_name">
                                        <h1>
                                            <%=userdata.firstname%>
                                                <%=userdata.lastname%>
                                        </h1>
                                        <span class="status-dot"></span>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ : <%= userdata.roles %>
                                    </div>
                    </div>

                    <div class="button_VO">
                        <%if(userdata.ID!=post.ID){%>
                            <%if(userdata.roles=="student"){%>
                                <a href="/home/profilestudent/<%=userdata.ID%>">
                                    <button class="b_view">‡∏î‡∏π‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</button>
                                </a>
                                <%}else{%>
                                    <a href="/home/profilegeneral">
                                        <button class="b_view">‡∏î‡∏π‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå</button>
                                    </a>
                                    <%}%>
                                        <%}%>

                                            <a>
                                                <form action="/logout" method="post">
                                                    <button class="b_logout">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
                                                </form>
                                            </a>
                    </div>
                </div>
            </div>
        </header>


        <main>
            <div class="profile-header">
                <div class="avatar-wrapper">

                    <% if(userdata.profile_image){ %>
                        <img src="/imageForTest/<%= post.profile_image %>" alt="<%= post.profile_image%>"
                            class="avatar-img" id="profile_">
                        <% } else{%>
                            <img src="https://ui-avatars.com/api/?name=<%= post.username || 'User' %>" alt="‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå"
                                class="avatar-img" id="profile_">
                            <% }%>
                                <%if(userdata.ID==post.ID){%>
                                    <input type="file" accept="image/*" id="avatar_upload" onchange="edit_profile(this)"
                                        style="display: none;">
                                    <button class="edit-avatar-btn"
                                        onclick="document.getElementById('avatar_upload').click()">‚úé</button>
                                    <%}%>
                </div>

                <div class="header-info">
                    <div class="name-rating-row">
                        <h1 id="user-name">
                            <%=post.firstname%>
                                <%=post.lastname%>
                        </h1>
                    </div>
                    <p class="status-badge">
                        <span class="status-dot"></span> ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ : <%= post.roles %>
                    </p>
                    <p class="faculty-text">‡∏Ñ‡∏ì‡∏∞ : <%= post.Sgroup %>
                    </p>
                    <!--<div class="stats-card">
                        <span class="check-icon">‚úì</span> ‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à : 10 ‡∏á‡∏≤‡∏ô
                    </div>-->
                </div>
            </div>

            <div class="profile-content">
                <div class="sidebar">
                    <section class="contact-section">
                        <form action="" method="post"></form>
                        <div class="section-header">
                            <h3>‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</h3>
                            <%if(userdata.ID==post.ID){%>
                                <button onclick="toggleEdit()" id="edit-btn" class="btn-small">‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                                <%}%>
                        </div>


                        <ul class="contact-list" id="contact-list">
                            <li>
                                <img class="icon" src="/../icon/gmail.png" alt="gmail">
                                <span class="contact-value" id="val-email">
                                    <%= post.email %>
                                </span>
                            </li>
                            <li>
                                <img src="/../icon/telephone.png" alt="phone">
                                <span class="contact-value" id="val-phone">
                                    <%= post.userPhoneNumber %>
                                </span>
                            </li>
                            <li>
                                <img src="/../icon/line.png" alt="line">
                                <span class="contact-value" id="val-line">
                                    <%= post.line %>
                                </span>
                            </li>
                            <li>
                                <img src="/../icon/instagram.png" alt="ig">
                                <span class="contact-value" id="val-ig">
                                    <%= post.instagram %>
                                </span>
                            </li>
                        </ul>
                        </form>
                    </section>

                    <section class="review-section">
                        <div class="review-header">
                            <h3>‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏•‡∏∞‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</h3>
                            <button id="openReview" style="display: none;"></button>
                        </div>

                        <div id="reviewModal" class="modal">
                            <div class="modal-content">
                                <h3>‡πÉ‡∏´‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ú‡∏•‡∏á‡∏≤‡∏ô</h3>
                                <p id="error-msg" style="color: red; display: none; font-size: 14px;"></p>

                                <div class="star-rating">
                                    <input type="radio" name="rating" id="rat-5" value="5"><label for="rat-5"></label>
                                    <input type="radio" name="rating" id="rat-4" value="4"><label for="rat-4"></label>
                                    <input type="radio" name="rating" id="rat-3" value="3"><label for="rat-3"></label>
                                    <input type="radio" name="rating" id="rat-2" value="2"><label for="rat-2"></label>
                                    <input type="radio" name="rating" id="rat-1" value="1"><label for="rat-1"></label>
                                </div>

                                <div class="upload-section">
                                    <label for="reviewImgInput" class="custom-file-upload">
                                        üì∏ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ú‡∏•‡∏á‡∏≤‡∏ô
                                    </label>
                                    <input type="file" id="reviewImgInput" accept="image/*"
                                        onchange="previewImage(this)">
                                    <div id="image-preview-container"></div>
                                </div>

                                <textarea id="reviewText" placeholder="‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà..."></textarea>

                                <div class="modal-buttons">
                                    <button id="cancelBtn">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
                                    <button id="submitBtn">‡∏ï‡∏Å‡∏•‡∏á</button>
                                </div>
                            </div>
                        </div>





                        <div class="rating-summary-card">
                            <div class="rating-left">
                                <h1 id="avg-score">0.0</h1>
                                <div class="stars-display" id="avg-stars"></div>
                                <p id="total-reviews-count">‡∏à‡∏≤‡∏Å 0 ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß</p>
                            </div>

                            <div class="rating-right">
                                <div class="bar-row">
                                    <span>5 ‡∏î‡∏≤‡∏ß</span>
                                    <div class="bar-bg">
                                        <div class="bar-fill" id="bar-5"></div>
                                    </div>
                                    <span class="count-text" id="count-5">0</span>
                                </div>
                                <div class="bar-row">
                                    <span>4 ‡∏î‡∏≤‡∏ß</span>
                                    <div class="bar-bg">
                                        <div class="bar-fill" id="bar-4"></div>
                                    </div>
                                    <span class="count-text" id="count-4">0</span>
                                </div>
                                <div class="bar-row">
                                    <span>3 ‡∏î‡∏≤‡∏ß</span>
                                    <div class="bar-bg">
                                        <div class="bar-fill" id="bar-3"></div>
                                    </div>
                                    <span class="count-text" id="count-3">0</span>
                                </div>
                                <div class="bar-row">
                                    <span>2 ‡∏î‡∏≤‡∏ß</span>
                                    <div class="bar-bg">
                                        <div class="bar-fill" id="bar-2"></div>
                                    </div>
                                    <span class="count-text" id="count-2">0</span>
                                </div>
                                <div class="bar-row">
                                    <span>1 ‡∏î‡∏≤‡∏ß</span>
                                    <div class="bar-bg">
                                        <div class="bar-fill" id="bar-1"></div>
                                    </div>
                                    <span class="count-text" id="count-1">0</span>
                                </div>
                            </div>
                        </div>



                        <div class="filter-tags">
                            <button class="tag active" onclick="filterReviews('all')">‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                            <button class="tag" onclick="filterReviews('hasImage')">‡∏°‡∏µ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û (<span
                                    id="f-img">0</span>)</button>
                            <button class="tag" onclick="filterReviews(5)">5 ‡∏î‡∏≤‡∏ß (<span id="f-5">0</span>)</button>
                            <button class="tag" onclick="filterReviews(4)">4 ‡∏î‡∏≤‡∏ß (<span id="f-4">0</span>)</button>
                            <button class="tag" onclick="filterReviews(3)">3 ‡∏î‡∏≤‡∏ß (<span id="f-3">0</span>)</button>
                            <button class="tag" onclick="filterReviews(2)">2 ‡∏î‡∏≤‡∏ß (<span id="f-2">0</span>)</button>
                            <button class="tag" onclick="filterReviews(1)">1 ‡∏î‡∏≤‡∏ß (<span id="f-1">0</span>)</button>
                        </div>
                        <h3 style="margin: 0;">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå</h3>
                        <div id="image-gallery-preview" class="image-gallery"></div>
                        <div id="reviewContainer" class="review-preview"></div>
                        <button id="show-all-reviews-btn" class="btn-view-more" onclick="showFullReviews()"
                            style="display:none;">
                            ‡∏î‡∏π‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                        </button>

                    </section>
                </div>

                <div class="main-content">
                    <h3 class="section-title">‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏±‡∏ö</h3>
                    <div id="job-container">
                        <% if(post.job_create==1){ %>
                            <a href="/home/viewStdPost/<%=post.job_id%>" class="card-link">
                                <div class="card-image"><img src="/./imageForTest/<%=post.service_image%>"
                                        alt='service image'></div>
                                <div class="card-body">
                                    <h4>
                                        <%= post.title %>
                                    </h4>
                                    <ul class="work-details">
                                        <li><strong>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏á‡∏≤‡∏ô:</strong>
                                            <%= post.job_type || '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å' %>
                                        </li>
                                        <li><strong>‡∏£‡∏≤‡∏Ñ‡∏≤:</strong>
                                            <%=post.budjet%> ‡∏ö‡∏≤‡∏ó
                                        </li>
                                        <li class="job-description-text">
                                            <strong>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:</strong>
                                            <%=post.des_Cription%>
                                        </li>
                                    </ul>
                                    <%if(userdata.ID==post.ID){%>
                                        <div class="action-buttons">
                                            <form action="/student/post_skill" class="btn-edit" method="get">
                                                <button type="submit" class="btn-edits">‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                                            </form>

                                            <form action="/student/deletePost" class="btn-delete" method="post">
                                                <button type="submit" class="btn-deletes">üóëÔ∏è ‡∏•‡∏ö</button>
                                            </form>

                                        </div>
                                        <%}%>
                                </div>
                            </a>
                            <% } else {%>
                                <p id="no-job-msg" style="text-align:center; color:#888; margin-top:20px;">
                                    ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÇ‡∏û‡∏™‡∏ï‡πå‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ</p>
                                <% } %>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <footer>
        <div class="footer-contact">
            <p>‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</p>
            <p>sdhire67@gmail.com</p>
        </div>
        <div class="footer-bottom">
            <p>¬© 2025 SDhire, All right reserved</p>
        </div>
    </footer>

    <script src="/../profilejs/review_star.js"></script>
    <script src="/../profilejs/swith_PR.js"></script>
    <script src="/../profilejs/script.js"></script>
</body>

</html>